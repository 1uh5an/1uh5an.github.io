{"meta":{"title":"Hexo","subtitle":"","description":"","author":"self_209","url":"https://self209.github.io","root":"/"},"pages":[{"title":"all-categories","date":"2021-12-25T10:13:54.918Z","updated":"2021-12-25T10:13:54.918Z","comments":false,"path":"all-categories/index.html","permalink":"https://self209.github.io/all-categories/index.html","excerpt":"","text":""},{"title":"all-tags","date":"2021-12-25T10:15:46.692Z","updated":"2021-12-25T10:15:46.692Z","comments":false,"path":"all-tags/index.html","permalink":"https://self209.github.io/all-tags/index.html","excerpt":"","text":""},{"title":"all-archives","date":"2021-12-25T10:16:57.727Z","updated":"2021-12-25T10:16:57.727Z","comments":false,"path":"all-archives/index.html","permalink":"https://self209.github.io/all-archives/index.html","excerpt":"","text":""}],"posts":[{"title":"java反序列化URLDNS","slug":"20211226","date":"2021-12-26T01:34:26.000Z","updated":"2021-12-26T09:29:06.209Z","comments":true,"path":"2021/12/26/20211226/","link":"","permalink":"https://self209.github.io/2021/12/26/20211226/","excerpt":"初次接触java反序列化漏洞，通过分析ysoserial工具中的payload，复现漏洞，来学习java反序列化漏洞。本文先从最简单的URLDNS Gadget chain开始java反序列化篇章。","text":"初次接触java反序列化漏洞，通过分析ysoserial工具中的payload，复现漏洞，来学习java反序列化漏洞。本文先从最简单的URLDNS Gadget chain开始java反序列化篇章。 java原生反序列化JDK类库中的序列化API java.io.ObjectOutputStream代表对象输出流，它的writeObject(Object obj)方法可对参数指定的obj对象进行序列化，把得到的字节序列写到一个目标输出流中。 java.io.ObjectInputStream代表对象输入流，它的readObject()方法从一个源输入流中读取字节序列，再把它们反序列化为一个对象，并将其返回。 只有实现了Serializable和Externalizable接口的类的对象才能被序列化。Externalizable接口继承自 Serializable接口，实现Externalizable接口的类完全由自身来控制序列化的行为，而仅实现Serializable接口的类可以 采用默认的序列化方式 。 对象序列化包括如下步骤： 创建一个对象输出流，它可以包装一个其他类型的目标输出流，如文件输出流； 通过对象输出流的writeObject()方法写对象。 对象反序列化的步骤如下： 创建一个对象输入流，它可以包装一个其他类型的源输入流，如文件输入流； 通过对象输入流的readObject()方法读取对象。 例： 定义一个Student类，实现Serializable接口 123456789101112131415161718192021222324252627282930313233343536373839404142import java.io.Serializable;public class Student implements Serializable &#123; private int age; private String name; private String sex; public Student()&#123; &#125; public Student(String name,int age,String sex)&#123; this.age = age; this.name = name; this.sex = sex; &#125; public int getAge() &#123; return age; &#125; public String getName() &#123; return name; &#125; public String getSex() &#123; return sex; &#125; public void setAge(int age) &#123; this.age = age; &#125; public void setName(String name) &#123; this.name = name; &#125; public void setSex(String sex) &#123; this.sex = sex; &#125;&#125; 序列化和反序列化Student类对象 123456789101112131415161718192021222324252627282930313233343536373839import java.io.File;import java.io.FileInputStream;import java.io.FileNotFoundException;import java.io.FileOutputStream;import java.io.IOException;import java.io.ObjectInputStream;import java.io.ObjectOutputStream;import java.text.MessageFormat;public class SerializeAndDeserialize &#123; public static void main(String[] args) throws Exception &#123; SerializeStudent();//序列化Student对象 Student s = DeserializeStudent();//反序列Student对象 System.out.println(MessageFormat.format(&quot;name=&#123;0&#125;,age=&#123;1&#125;,sex=&#123;2&#125;&quot;, s.getName(), s.getAge(), s.getSex())); &#125; private static void SerializeStudent() throws FileNotFoundException,IOException &#123; Student student = new Student(&quot;zhangsan&quot;,18,&quot;男&quot;); // ObjectOutputStream 对象输出流，将Student对象存储为Student.txt文件中，完成对Student对象的序列化操作 ObjectOutputStream oo = new ObjectOutputStream(new FileOutputStream(new File(&quot;Student.txt&quot;))); oo.writeObject(student); System.out.println(&quot;Student对象序列化成功！&quot;); oo.close(); &#125; private static Student DeserializeStudent() throws Exception, IOException &#123; ObjectInputStream ois = new ObjectInputStream(new FileInputStream( new File(&quot;Student.txt&quot;))); Student student = (Student) ois.readObject(); System.out.println(&quot;Student对象反序列化成功！&quot;); return student; &#125;&#125; 代码运行结果如下：","categories":[],"tags":[{"name":"反序列化","slug":"反序列化","permalink":"https://self209.github.io/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"},{"name":"java","slug":"java","permalink":"https://self209.github.io/tags/java/"}]}],"categories":[],"tags":[{"name":"反序列化","slug":"反序列化","permalink":"https://self209.github.io/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"},{"name":"java","slug":"java","permalink":"https://self209.github.io/tags/java/"}]}